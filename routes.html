<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rutas y An√°lisis - Costa Transportes</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lykmapipo/themify-icons@0.1.2/css/themify-icons.css">
    <link rel="stylesheet" href="css/table.css">
    <link rel="stylesheet" href="css/analytics.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
</head>

<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo-container">
                <div class="logo">
                    <img src="css/logo.jpg" alt="Costa Transportes" class="logo-img">
                </div>
            </div>
            
            <nav class="nav-menu">
                <a href="index.html" class="nav-link" data-tab="providers">
                    <i class="ti-home sidemenu-icon menu-icon"></i>
                    <span class="menu-title">Proveedores</span>
                </a>
                <a href="payments.html" class="nav-link" data-tab="payments">
                    <i class="ti-wallet sidemenu-icon menu-icon"></i>
                    <span class="menu-title">Pagos</span>
                </a>
                <a href="routes.html" class="nav-link active" data-tab="routes">
                    <i class="ti-direction-alt sidemenu-icon menu-icon"></i>
                    <span class="menu-title">Rutas</span>
                </a>
                <div class="sidebar-nav">
                <a href="analitycs.html" class="nav-link" data-tab="analiticas">
                    <i class="ti-bar-chart sidemenu-icon menu-icon"></i>
                    <span class="menu-title">An√°lisis</span>
                </a>
                </div>
            </nav>
            
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="header">
                <h1>Rutas</h1>
            </div>
            

<!-- Secci√≥n de An√°lisis -->
<div id="analiticas" class="tab-content" style="display: none;">
    <div class="analytics-container">
        <div class="analytics-header">
            <h1>üìä Dashboard de M√©tricas</h1>
            <p>Costa Transportes - An√°lisis de Rendimiento</p>
        </div>

        <!-- Tarjetas de estad√≠sticas -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="totalRevenue">$12,520,000</div>
                <div class="stat-label">Recaudaci√≥n Total</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalCommission">$2,504,000</div>
                <div class="stat-label">Comisi√≥n Total</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="netPayment">$10,016,000</div>
                <div class="stat-label">Pago Neto Total</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="avgOccupancy">53%</div>
                <div class="stat-label">Ocupaci√≥n Promedio</div>
            </div>
        </div>

        <!-- Filtros -->
        <div class="filters">
            <button class="filter-btn active" onclick="filterData('all')">Todos</button>
            <button class="filter-btn" onclick="filterData('tacoha')">Tacoha</button>
            <button class="filter-btn" onclick="filterData('traveltur')">Traveltur</button>
        </div>

        <!-- Tarjetas de proveedores -->
        <div class="provider-cards">
            <div class="provider-card tacoha">
                <div class="provider-name">üöå Tacoha</div>
                <div class="provider-info">
                    <div class="info-item">
                        <span class="info-label">Representante:</span>
                        <span class="info-value">Jorge Martinez</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Comisi√≥n:</span>
                        <span class="info-value">20%</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Rutas:</span>
                        <span class="info-value">3</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Estado:</span>
                        <span class="info-value" style="color: #28a745;">‚úÖ Aprobado</span>
                    </div>
                </div>
            </div>
            
            <div class="provider-card traveltur">
                <div class="provider-name">üöê Traveltur</div>
                <div class="provider-info">
                    <div class="info-item">
                        <span class="info-label">Representante:</span>
                        <span class="info-value">Rodrigo Mu√±oz</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Comisi√≥n:</span>
                        <span class="info-value">15%</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Rutas:</span>
                        <span class="info-value">3</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Estado:</span>
                        <span class="info-value" style="color: #007bff;">‚è≥ Pendiente</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gr√°ficos -->
        <div class="charts-grid">
            <div class="chart-container">
                <div class="chart-title">üí∞ Distribuci√≥n de Ingresos por Proveedor</div>
                <canvas id="revenueChart"></canvas>
            </div>
            
            <div class="chart-container">
                <div class="chart-title">üìä Comparaci√≥n de Comisiones</div>
                <canvas id="commissionChart"></canvas>
            </div>
            
            <div class="chart-container full-width-chart">
                <div class="chart-title">üìà An√°lisis de Rendimiento por Ruta</div>
                <canvas id="routePerformanceChart"></canvas>
            </div>
            
            <div class="chart-container">
                <div class="chart-title">üéØ Ocupaci√≥n por Proveedor</div>
                <canvas id="occupancyChart"></canvas>
            </div>
            
            <div class="chart-container">
                <div class="chart-title">üí≥ Pagos Netos Comparativos</div>
                <canvas id="netPaymentChart"></canvas>
            </div>
        </div>

        <!-- An√°lisis de rutas -->
        <div class="route-analysis">
            <div class="chart-title">üó∫Ô∏è An√°lisis Detallado de Rutas</div>
            <table class="route-table">
                <thead>
                    <tr>
                        <th>Ruta</th>
                        <th>Proveedor</th>
                        <th>Recaudaci√≥n</th>
                        <th>Ocupaci√≥n</th>
                        <th>Eficiencia</th>
                        <th>Pago Neto</th>
                    </tr>
                </thead>
                <tbody id="routeTableBody">
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Secci√≥n de Tabla de Rutas -->
<div id="tabla-rutas" class="tab-content">
    <div class="providersTable">
        <table id="proveedoresTable">
                <thead>
                    <tr>
                        <th class="col-a">#</th>
                        <th class="col-b">Proveedor</th>
                        <th class="col-c">Representante</th>
                        <th class="col-d">Ruta</th>
                        <th class="col-e">Decena</th>
                        <th class="col-f">Precio<br/>KM</th>
                        <th class="col-g">Precio<br>Promedio/asiento</th>
                        <th class="col-h">KM<br>Ofrecidos</th>
                        <th class="col-i">KM<br>Vendidos</th>
                        <th class="col-j">%<br>Ocupaci√≥n</th>
                        <th class="col-k">Pasajeros</th>
                        <th class="col-l">Producci√≥n<br>Total</th>
                        <th class="col-m">Comisi√≥n<br>Pullman</th>
                        <th class="col-n">Pago<br>Neto</th>
                        <th class="col-o">Estado<br>Pago</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Proveedor 1: Tacoha -->
                    <tr>
                        <td class="row-number">1</td>
                        <td class="provider-main">Tacoha</td>
                        <td class="provider-main">Jorge Martinez</td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="commission">20%</td>
                        <td class="provider-data"></td>
                        <td class="approval-r">Revisi√≥n</td>
                    </tr>

                    <tr>
                        <td class="provider-data"></td>
                        <td class="provider-data">ABC123</td>
                        <td class="provider-data">-</td>
                        <td class="provider-data">Santiago - Vi√±a del Mar</td>
                        <td class="provider-data"></td>
                        <td class="currency">$1,380</td>
                        <td class="currency">$5,600</td>
                        <td class="numeric">233200</td>
                        <td class="numeric">123430</td>
                        <td class="percentage">53%</td>
                        <td class="numeric">6523</td>
                        <td class="currency">$2,350,000</td>
                        <td class="currency">$470,000</td>
                        <td class="currency">$1,880,000</td>
                        <td class="provider-data"></td>
                    </tr>

                    <tr>
                        <td class="provider-data"></td>
                        <td class="provider-data">XYZ456</td>
                        <td class="provider-data">-</td>
                        <td class="provider-data">Valpara√≠so - Santiago</td>
                        <td class="provider-data"></td>
                        <td class="currency">$900</td>
                        <td class="currency">$4,300</td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="currency">$1,560,000</td>
                        <td class="currency">$312,000</td>
                        <td class="currency">$1,248,000</td>
                        <td class="provider-data"></td>
                    </tr>

                    <tr>
                        <td class="provider-data"></td>
                        <td class="provider-data">MNC789</td>
                        <td class="provider-data">-</td>
                        <td class="provider-data">Iquique - Arica</td>
                        <td class="provider-data"></td>
                        <td class="currency">$876</td>
                        <td class="currency">$6,100</td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="currency">$2,100,000</td>
                        <td class="currency">$420,000</td>
                        <td class="currency">$1,680,000</td>
                        <td class="provider-data"></td>
                    </tr>

                    <!-- Fila vac√≠a -->
                    <tr class="empty-row">
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>

                    <!-- Proveedor 2: Traveltur -->
                    <tr>
                        <td class="row-number">2</td>
                        <td class="provider-main">Traveltur</td>
                        <td class="provider-main">Rodrigo Mu√±oz</td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="commission">15%</td>
                        <td class="provider-data"></td>
                        <td class="approval-t">Transferido</td>
                    </tr>

                    <tr>
                        <td class="provider-data"></td>
                        <td class="provider-data">ABC123</td>
                        <td class="provider-data">-</td>
                        <td class="provider-data">Santiago - Valdivia</td>
                        <td class="provider-data"></td>
                        <td class="currency">$1,380</td>
                        <td class="currency">$5,600</td>
                        <td class="numeric">233200</td>
                        <td class="numeric">123430</td>
                        <td class="percentage">53%</td>
                        <td class="numeric">6523</td>
                        <td class="currency">$2,350,000</td>
                        <td class="currency">$470,000</td>
                        <td class="currency">$1,880,000</td>
                        <td class="provider-data"></td>
                    </tr>

                    <tr>
                        <td class="provider-data"></td>
                        <td class="provider-data">XYZ456</td>
                        <td class="provider-data">-</td>
                        <td class="provider-data">Valpara√≠so - La Serena</td>
                        <td class="provider-data"></td>
                        <td class="currency">$900</td>
                        <td class="currency">$4,300</td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="currency">$1,560,000</td>
                        <td class="currency">$312,000</td>
                        <td class="currency">$1,248,000</td>
                        <td class="provider-data"></td>
                    </tr>

                    <tr>
                        <td class="provider-data"></td>
                        <td class="provider-data">MNC789</td>
                        <td class="provider-data">-</td>
                        <td class="provider-data">Iquique - Calama</td>
                        <td class="provider-data"></td>
                        <td class="currency">$876</td>
                        <td class="currency">$6,100</td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="provider-data"></td>
                        <td class="currency">$2,100,000</td>
                        <td class="currency">$420,000</td>
                        <td class="currency">$1,680,000</td>
                        <td class="provider-data"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    
    <!-- Script para el cambio de pesta√±as -->
    <script>
        // Funcionalidad para cambiar entre pesta√±as
        document.addEventListener('DOMContentLoaded', function() {
            // Mostrar la pesta√±a activa por defecto
            showTab('tabla-rutas');
            
            // Agregar manejadores de eventos a los enlaces del men√∫
            document.querySelectorAll('.sidebar-nav a').forEach(link => {
                link.addEventListener('click', function(e) {
                    const tabId = this.getAttribute('href').substring(1);
                    showTab(tabId);
                    
                    // Actualizar la clase activa en los enlaces del men√∫
                    document.querySelectorAll('.sidebar-nav a').forEach(a => a.classList.remove('active'));
                    this.classList.add('active');
                });
            });
        });
        
        function showTab(tabId) {
            // Ocultar todos los contenidos de pesta√±as
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.style.display = 'none';
            });
            
            // Mostrar la pesta√±a seleccionada
            const activeTab = document.getElementById(tabId);
            if (activeTab) {
                activeTab.style.display = 'block';
            }
        }
    </script>
    
    <!-- Incluir el archivo de an√°lisis -->
    <script src="js/analytics.js"></script>
    </body>
</html>